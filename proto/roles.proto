syntax = "proto3";

package chremoas.roles;

import "common.proto";

service Roles {
    rpc AddRole (Role) returns (NilMessage) {};
    rpc UpdateRole (UpdateInfo) returns (NilMessage) {};
    rpc RemoveRole (Role) returns (NilMessage) {};
    rpc GetRoles (NilMessage) returns (GetRolesResponse) {};
    rpc GetRole (Role) returns (Role) {};
    rpc SyncRoles (NilMessage) returns (SyncRolesResponse) {};
    rpc GetRoleKeys (NilMessage) returns (StringList) {};
    rpc GetRoleTypes (NilMessage) returns (StringList) {};
}

message StringList {
    repeated string Value = 1;
}

message Role {
    string Type = 1;
    string ShortName = 2;

    // Discord
    string Name = 3;
    int32 Color = 4;
    bool Hoist = 5;
    int32 Position = 6;
    int32 Permissions = 7;
    bool Managed = 8;
    bool Mentionable = 9;
}

message UpdateInfo {
    string Name = 1;
    string Key = 2;
    string Value = 3;
}

message GetRolesResponse {
    repeated Role Roles = 1;
}

message SyncRoles {
    string Source = 1;
    string Destination = 2;
    string Name = 3;
}

message SyncRolesResponse {
    repeated SyncRoles Roles = 1;
}
